unit uWebUITypes;

{$I uWebUI.inc}    

{$IFDEF FPC}
  {$MODE delphiunicode}
{$ENDIF}

{$IFNDEF TARGET_64BITS}{$ALIGN ON}{$ENDIF}
{$MINENUMSIZE 4}

interface

uses
  {$IFDEF DELPHI16_UP}
    {$IFDEF MSWINDOWS}WinApi.Windows,{$ENDIF} System.Classes;
  {$ELSE}
    {$IFDEF MSWINDOWS}Windows,{$ENDIF} Classes;
  {$ENDIF}

type
  IWebUIEventHandler = interface;
  IWebUIWindow = interface;

  /// <summary>
  /// TWebUILoader status values
  /// </summary>
  TLoaderStatus = (lsCreated,
                   lsLoading,
                   lsLoaded,
                   lsInitialized,
                   lsError,
                   lsUnloaded);

  /// <summary>
  /// Supported web browsers.
  /// </summary>
  /// <remarks>
  /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_browser)</see></para>
  /// </remarks>
  TWebUIBrowser = (
    /// <summary>
    /// No web browser.
    /// </summary>
    NoBrowser = 0,
    /// <summary>
    /// Default web browser.
    /// </summary>
    AnyBrowser,
    /// <summary>
    /// Google Chrome.
    /// </summary>
    Chrome,
    /// <summary>
    /// Mozilla Firefox.
    /// </summary>
    Firefox,
    /// <summary>
    /// Microsoft Edge.
    /// </summary>
    Edge,
    /// <summary>
    /// Apple Safari.
    /// </summary>
    Safari,
    /// <summary>
    /// Chromium.
    /// </summary>
    Chromium,
    /// <summary>
    /// Opera.
    /// </summary>
    Opera,
    /// <summary>
    /// Brave.
    /// </summary>
    Brave,
    /// <summary>
    /// Vivaldi.
    /// </summary>
    Vivaldi,
    /// <summary>
    /// Epic.
    /// </summary>
    Epic,
    /// <summary>
    /// Yandex.
    /// </summary>
    Yandex,
    /// <summary>
    /// Any Chromium based browser.
    /// </summary>
    ChromiumBased,
    /// <summary>
    /// WebView (Non-web-browser).
    /// </summary>
    Webview
  );

  /// <summary>
  /// Supported runtimes.
  /// </summary>
  /// <remarks>
  /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_runtime)</see></para>
  /// </remarks>
  TWebUIRuntime = (
    /// <summary>
    /// Prevent WebUI from using any runtime for .js and .ts files.
    /// </summary>
    None = 0,
    /// <summary>
    /// Use Deno runtime for .js and .ts files.
    /// </summary>
    Deno,
    /// <summary>
    /// Use Nodejs runtime for .js files.
    /// </summary>
    NodeJS,
    /// <summary>
    /// Use Bun runtime for .js and .ts files
    /// </summary>
    Bun
  );

  /// <summary>
  /// Event types.
  /// </summary>
  /// <remarks>
  /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_event)</see></para>
  /// </remarks>
  TWebUIEventType = (
    /// <summary>
    /// Window disconnection event.
    /// </summary>
    WEBUI_EVENT_DISCONNECTED = 0,
    /// <summary>
    /// Window connection event.
    /// </summary>
    WEBUI_EVENT_CONNECTED,
    /// <summary>
    /// Mouse click event.
    /// </summary>
    WEBUI_EVENT_MOUSE_CLICK,
    /// <summary>
    /// Window navigation event.
    /// </summary>
    WEBUI_EVENT_NAVIGATION,
    /// <summary>
    /// Function call event.
    /// </summary>
    WEBUI_EVENT_CALLBACK
  );

  /// <summary>
  /// Window number or Window ID.
  /// </summary>
  TWebUIWindowID = type NativeUInt;

  /// <summary>
  /// Bind ID.
  /// </summary>
  TWebUIBindID = type NativeUInt;

  /// <summary>
  /// Client's  unique ID.
  /// </summary>
  TWebUIClientID = type NativeUInt;

  /// <summary>
  /// The event number or event ID.
  /// </summary>
  TWebUIEventID = type NativeUInt;

  /// <summary>
  /// Client's connection ID.
  /// </summary>
  TWebUIConnectionID = type NativeUInt;

  /// <summary>
  /// WebUI char type.
  /// </summary>
  TWebUIChar = type AnsiChar;
  PWebUIChar = ^TWebUIChar;

  /// <summary>
  /// WebUI configuration.
  /// </summary>
  /// <remarks>
  /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_config)</see></para>
  /// </remarks>
  TWebUIConfig = (
    /// <summary>
    /// Control if `webui_show()`, `webui_show_browser()` and
    /// `webui_show_wv()` should wait for the window to connect
    /// before returns or not. Default: True.
    /// </summary>
    show_wait_connection = 0,
    /// <summary>
    /// Control if WebUI should block and process the UI events
    /// one a time in a single thread `True`, or process every
    /// event in a new non-blocking thread `False`. This updates
    /// all windows. You can use `webui_set_event_blocking()` for
    /// a specific single window update. Default: False.
    /// </summary>
    ui_event_blocking,
    /// <summary>
    /// Automatically refresh the window UI when any file in the
    /// root folder gets changed.
    /// Default: False
    /// </summary>
    folder_monitor,
    /// <summary>
    /// Allow multiple clients to connect to the same window,
    /// This is helpful for web apps (non-desktop software),
    /// Please see the documentation for more details.
    /// Default: False
    /// </summary>
    multi_client,
    /// <summary>
    /// Allow or prevent WebUI from adding `webui_auth` cookies.
    /// WebUI uses these cookies to identify clients and block
    /// unauthorized access to the window content using a URL.
    /// Please keep this option to `True` if you want only a single
    /// client to access the window content.
    /// Default: True
    /// </summary>
    use_cookies,
    /// <summary>
    /// If the backend uses asynchronous operations, set this
    /// option to `True`. This will make webui wait until the
    /// backend sets a response using `webui_return_x()`.
    /// </summary>
    asynchronous_response
  );

  /// <summary>
  /// WebUI event.
  /// </summary>
  /// <remarks>
  /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_event_t)</see></para>
  /// </remarks>
  TWebUIEvent = record
    /// <summary>
    /// The window object number.
    /// </summary>
    window        : TWebUIWindowID;
    /// <summary>
    /// Event type.
    /// </summary>
    event_type    : TWebUIEventType;
    /// <summary>
    /// HTML element ID.
    /// </summary>
    element       : PWebUIChar;
    /// <summary>
    /// Internal WebUI. Event number or Event ID.
    /// </summary>
    event_number  : TWebUIEventID;
    /// <summary>
    /// Bind ID.
    /// </summary>
    bind_id       : TWebUIBindID;
    /// <summary>
    /// Client's unique ID.
    /// </summary>
    client_id     : TWebUIClientID;
    /// <summary>
    /// Client's connection ID.
    /// </summary>
    connection_id : TWebUIConnectionID;
    /// <summary>
    /// Client's full cookies.
    /// </summary>
    cookies       : PWebUIChar;
  end;
  PWebUIEvent = ^TWebUIEvent;

  TWebUIBindCallback               = procedure(e: PWebUIEvent); cdecl;
  TWebUIFileHandlerCallback        = function(const filename: PWebUIChar; len: PInteger): Pointer; cdecl;
  TWebUIFileHandlerWindowCallback  = function(window: TWebUIWindowID; const filename: PWebUIChar; len: PInteger): Pointer; cdecl;
  TWebUIInterfaceEventCallback     = procedure(window : TWebUIWindowID; event_type: TWebUIEventType; const element: PWebUIChar; event_number: TWebUIEventID; bind_id: TWebUIBindID); cdecl;

  TOnWebUIEvent = procedure(Sender: TObject; const aEvent: IWebUIEventHandler) of object;



  IWebUIEventHandler = interface
    ['{CD157359-C95D-4DBA-835F-B43E99DCE1D0}']
      function GetInitialized: boolean;
      function GetEvent: PWebUIEvent;
      function GetWindowID: TWebUIWindowID;
      function GetEventType: TWebUIEventType;
      function GetElement: string;
      function GetEventID: TWebUIEventID;
      function GetBindID: TWebUIBindID;
      function GetWindow: IWebUIWindow;
      function GetCount: NativeUInt;
      function GetClientID: TWebUIClientID;
      function GetConnectionID : TWebUIConnectionID;
      function GetCookies : string;
      function GetContext : Pointer;

      /// <summary>
      /// Get an argument as integer at a specific index.
      /// </summary>
      /// <param name="index">The argument position starting from 0.</param>
      /// <returns>Returns argument as integer.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_int_at)</see></para>
      /// </remarks>
      function GetIntAt(index: NativeUInt): int64;
      /// <summary>
      /// Get the first argument as integer.
      /// </summary>
      /// <returns>Returns argument as integer.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_int)</see></para>
      /// </remarks>
      function GetInt: int64;
      /// <summary>
      /// Get an argument as float at a specific index.
      /// </summary>
      /// <param name="index">The argument position starting from 0.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_float_at)</see></para>
      /// </remarks>
      function GetFloatAt(index: NativeUInt): double;
      /// <summary>
      /// Get the first argument as float.
      /// </summary>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_float)</see></para>
      /// </remarks>
      function GetFloat: double;
      /// <summary>
      /// Get an argument as string at a specific index.
      /// </summary>
      /// <param name="index">The argument position starting from 0.</param>
      /// <returns>Returns argument as string.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_string_at)</see></para>
      /// </remarks>
      function GetStringAt(index: NativeUInt): string;
      /// <summary>
      /// Get the first argument as string.
      /// </summary>
      /// <returns>Returns argument as string.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_string)</see></para>
      /// </remarks>
      function GetString: string;
      /// <summary>
      /// Get an argument as a stream at a specific index.
      /// </summary>
      /// <param name="aResultStream">The stream with the returned data.</param>
      /// <param name="index">The argument position starting from 0.</param>
      /// <returns>Returns true if the stream has data.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_string_at)</see></para>
      /// </remarks>
      function GetStreamAt(var aResultStream: TMemoryStream; index: NativeUInt): boolean;
      /// <summary>
      /// Get the first argument as a stream.
      /// </summary>
      /// <param name="aResultStream">The stream with the returned data.</param>
      /// <returns>Returns true if the stream has data.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_string)</see></para>
      /// </remarks>
      function GetStream(var aResultStream: TMemoryStream): boolean;
      /// <summary>
      /// Get an argument as boolean at a specific index.
      /// </summary>
      /// <param name="index">The argument position starting from 0.</param>
      /// <returns>Returns argument as boolean.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_bool_at)</see></para>
      /// </remarks>
      function GetBoolAt(index: NativeUInt): boolean;
      /// <summary>
      /// Get the first argument as boolean.
      /// </summary>
      /// <returns>Returns argument as boolean.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_bool)</see></para>
      /// </remarks>
      function GetBool: boolean;
      /// <summary>
      /// Get the size in bytes of an argument at a specific index.
      /// </summary>
      /// <param name="index">The argument position starting from 0.</param>
      /// <returns>Returns size in bytes.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_size_at)</see></para>
      /// </remarks>
      function GetSizeAt(index: NativeUInt): NativeUInt;
      /// <summary>
      /// Get size in bytes of the first argument.
      /// </summary>
      /// <returns>Returns size in bytes.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_size)</see></para>
      /// </remarks>
      function GetSize: NativeUInt;
      /// <summary>
      /// Return the response to JavaScript as integer.
      /// </summary>
      /// <param name="aReturnValue">The integer to be send to JavaScript.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_return_int)</see></para>
      /// </remarks>
      procedure ReturnInt(aReturnValue: int64);
      /// <summary>
      /// Return the response to JavaScript as float.
      /// </summary>
      /// <param name="aReturnValue">The float to be send to JavaScript.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_return_float)</see></para>
      /// </remarks>
      procedure ReturnFloat(aReturnValue: double);
      /// <summary>
      /// Return the response to JavaScript as string.
      /// </summary>
      /// <param name="aReturnValue">The string to be send to JavaScript.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_return_string)</see></para>
      /// </remarks>
      procedure ReturnString(const aReturnValue: string);
      /// <summary>
      /// Return the response to JavaScript as a stream.
      /// </summary>
      /// <param name="aReturnValue">The stream to be send to JavaScript.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_return_string)</see></para>
      /// </remarks>
      procedure ReturnStream(const aReturnValue: TMemoryStream); overload;
      /// <summary>
      /// Return the response to JavaScript as a stream.
      /// </summary>
      /// <param name="aReturnValue">The stream to be send to JavaScript.</param>
      /// <param name="aOffset">Moves the current stream position by aOffset bytes, relative to the beginning.</param>
      /// <param name="aCount">Copies aCount bytes from the stream.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_return_string)</see></para>
      /// </remarks>
      procedure ReturnStream(const aReturnValue: TMemoryStream; aOffset, aCount: int64); overload;
      /// <summary>
      /// Return the response to JavaScript as boolean.
      /// </summary>
      /// <param name="aReturnValue">The boolean to be send to JavaScript.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_return_bool)</see></para>
      /// </remarks>
      procedure ReturnBool(aReturnValue: boolean);
      /// <summary>
      /// When using `webui_interface_bind()`, you may need this function to easily set a response.
      /// </summary>
      /// <param name="response">The response as string to be send to JavaScript.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_interface_set_response)</see></para>
      /// </remarks>
      procedure SetResponse(const response: string);
      /// <summary>
      /// Show a window using embedded HTML, or a file. If the window is already open, it will be refreshed. Single client.
      /// </summary>
      /// <param name="content">The HTML, URL, Or a local file.</param>
      /// <returns>Returns True if showing the window is successed.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_show_client)</see></para>
      /// </remarks>
      function  ShowClient(const content : string) : boolean;
      /// <summary>
      /// Close a specific client.
      /// </summary>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_close_client)</see></para>
      /// </remarks>
      procedure   CloseClient;
      /// <summary>
      /// Safely send raw data to the UI. Single client.
      /// </summary>
      /// <param name="function_">The JavaScript function to receive raw data: `function * myFunc(myData){}`.</param>
      /// <param name="raw">The raw data buffer.</param>
      /// <param name="size">The raw data size in bytes.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_send_raw_client)</see></para>
      /// </remarks>
      procedure   SendRawClient(const function_: string; const raw: Pointer; size: NativeUInt);
      /// <summary>
      /// Navigate to a specific URL. Single client.
      /// </summary>
      /// <param name="url">Full HTTP URL.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_navigate_client)</see></para>
      /// </remarks>
      procedure   NavigateClient(const Url: string);
      /// <summary>
      /// Run JavaScript without waiting for the response. Single client.
      /// </summary>
      /// <param name="script_">The JavaScript to be run.</param>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_run)</see></para>
      /// </remarks>
      procedure   RunClient(const script_: string);
      /// <summary>
      /// Run JavaScript and get the response back. Single client.
      /// Make sure your local buffer can hold the response.
      /// </summary>
      /// <param name="script_">The JavaScript to be run.</param>
      /// <param name="timeout">The execution timeout in seconds.</param>
      /// <param name="buffer">The local buffer to hold the response.</param>
      /// <param name="buffer_length">The local buffer size.</param>
      /// <returns>Returns True if there is no execution error.</returns>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_script)</see></para>
      /// </remarks>
      function    ScriptClient(const script_: string; timeout: NativeUInt; var buffer: string; buffer_length: NativeUInt): boolean;

      /// <summary>
      /// Returns true if the Window was created successfully.
      /// </summary>
      property Initialized       : boolean            read GetInitialized;
      /// <summary>
      /// Pointer to WebUI event record.
      /// </summary>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_event_t)</see></para>
      /// </remarks>
      property Event             : PWebUIEvent        read GetEvent;
      /// <summary>
      /// Window wrapper for the Window object of this event.
      /// </summary>
      property Window            : IWebUIWindow       read GetWindow;
      /// <summary>
      /// The window object number or ID.
      /// </summary>
      property WindowID          : TWebUIWindowID     read GetWindowID;
      /// <summary>
      /// Event type.
      /// </summary>
      property EventType         : TWebUIEventType    read GetEventType;
      /// <summary>
      /// HTML element ID.
      /// </summary>
      property Element           : string             read GetElement;
      /// <summary>
      /// Event number or Event ID.
      /// </summary>
      property EventID           : TWebUIEventID      read GetEventID;
      /// <summary>
      /// Bind ID.
      /// </summary>
      property BindID            : TWebUIBindID       read GetBindID;
      /// <summary>
      /// Get how many arguments there are in an event.
      /// </summary>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_count)</see></para>
      /// </remarks>
      property Count             : NativeUInt         read GetCount;
      /// <summary>
      /// Client's unique ID.
      /// </summary>
      property ClientID          : TWebUIClientID     read GetClientID;
      /// <summary>
      /// Client's connection ID.
      /// </summary>
      property ConnectionID      : TWebUIConnectionID read GetConnectionID;
      /// <summary>
      /// Client's full cookies.
      /// </summary>
      property Cookies           : string             read GetCookies;
      /// <summary>
      /// Get user data that is set using `IWebUIWindow.SetContext`.
      /// </summary>
      /// <remarks>
      /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_context)</see></para>
      /// </remarks>
      property Context           : Pointer            read GetContext;
  end;

  IWebUIWindow = interface
    ['{0F575CA7-D7B7-4A77-BDD2-2636F02BA804}']
    function  GetID : TWebUIWindowID;
    function  GetInitialized : boolean;
    function  GetIsShown : boolean;
    function  GetUrl : string;
    function  GetParentProcessID : NativeUInt;
    function  GetChildProcessID : NativeUInt;
    function  GetOnWebUIEvent : TOnWebUIEvent;
    function  GetBestBrowser : TWebUIBrowser;
    function  GetAllowWebView : boolean;
    {$IFDEF MSWINDOWS}
    function  GetHWND : HWND;
    {$ENDIF}

    procedure SetOnWebUIEvent(const aEvent : TOnWebUIEvent);
    procedure SetAllowWebView(aAllow : boolean);

    procedure doOnWebUIEvent(const aEvent: IWebUIEventHandler);

    /// <summary>
    /// Close the window and free all memory resources.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_destroy)</see></para>
    /// </remarks>
    procedure   DestroyWindow;
    /// <summary>
    /// <para>Bind an HTML element and a JavaScript object with a backend function. Empty element name means all events.</para>
    /// </summary>
    /// <param name="element_">The HTML element / JavaScript object.</param>
    /// <returns>Returns a unique bind ID.</returns>
    /// <remarks>
    /// <para>The OnWebUIEvent event will be executed in the main application thread by default. Set WebUI.SyncedEvents to false in order to execute it in a background thread.</para>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_bind)</see></para>
    /// </remarks>
    function    Bind(const element_: string): TWebUIBindID; overload;
    /// <summary>
    /// Bind a specific html element click event with a function. Empty element means all events.
    /// </summary>
    /// <param name="element_">The HTML element ID.</param>
    /// <param name="func_">The callback function.</param>
    /// <returns>Returns a unique bind ID.</returns>
    /// <remarks>
    /// <para>The callback function will always be executed in a background thread!</para>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_bind)</see></para>
    /// </remarks>
    function    Bind(const element_: string; func_: TWebUIBindCallback): TWebUIBindID; overload;
    /// <summary>
    /// Bind a specific HTML element click event with a function. Empty element means all events.
    /// </summary>
    /// <param name="element_">The HTML element ID.</param>
    /// <param name="func_">The callback as myFunc(Window, EventType, Element, EventNumber, BindID).</param>
    /// <returns>Returns unique bind ID.</returns>
    /// <remarks>
    /// <para>The callback function will always be executed in a background thread!</para>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_interface_bind)</see></para>
    /// </remarks>
    function    Bind(const element_: string; func_: TWebUIInterfaceEventCallback): TWebUIBindID; overload;
    /// <summary>
    /// <para>Bind all browser events with the OnWebUIEvent event.</para>
    /// </summary>
    /// <returns>Returns a unique bind ID.</returns>
    /// <remarks>
    /// <para>The OnWebUIEvent event will be executed in the main application thread by default. Set WebUI.SyncedEvents to false in order to execute it in a background thread.</para>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_bind)</see></para>
    /// </remarks>
    function    BindAllEvents: TWebUIBindID; overload;
    /// <summary>
    /// Bind all events with a function.
    /// </summary>
    /// <param name="func_">The callback function.</param>
    /// <returns>Returns a unique bind ID.</returns>
    /// <remarks>
    /// <para>The callback function will always be executed in a background thread!</para>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_bind)</see></para>
    /// </remarks>
    function    BindAllEvents(func_: TWebUIBindCallback): TWebUIBindID; overload;
    /// <summary>
    /// Show a window using embedded HTML, or a file. If the window is already open, it will be refreshed. This will refresh all windows in multi-client mode.
    /// </summary>
    /// <param name="content">The HTML, URL, Or a local file.</param>
    /// <returns>Returns True if showing the window is successed.</returns>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_show)</see></para>
    /// </remarks>
    function    Show(const content : string) : boolean;
    /// <summary>
    /// Same as `webui_show()`. But using a specific web browser.
    /// </summary>
    /// <param name="content">The HTML, URL, Or a local file.</param>
    /// <param name="browser">The web browser to be used.</param>
    /// <returns>Returns True if showing the window is successed.</returns>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_show_browser)</see></para>
    /// </remarks>
    function    ShowBrowser(const content : string; browser : TWebUIBrowser) : boolean;
    /// <summary>
    /// Show a WebView window using embedded HTML, or a file. If the window is already
    /// open, it will be refreshed. Note: Win32 need `WebView2Loader.dll`.
    /// </summary>
    /// <param name="content">The HTML, URL, Or a local file.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_show_wv)</see></para>
    /// </remarks>
    function    ShowWV(const content : string) : boolean;
    /// <summary>
    /// Set the window in Kiosk mode (Full screen).
    /// </summary>
    /// <param name="status">True or False.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_kiosk)</see></para>
    /// </remarks>
    procedure   SetKiosk(status: boolean);
    /// <summary>
    /// Close a specific window only. The window object will still exist. All clients.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_close)</see></para>
    /// </remarks>
    procedure   Close;
    /// <summary>
    /// Set the web-server root folder path for a specific window.
    /// </summary>
    /// <param name="path">The local folder full path.</param>
    /// <returns>Returns True if the function was successful.</returns>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_root_folder)</see></para>
    /// </remarks>
    function    SetRootFolder(const path : string) : boolean;
    /// <summary>
    /// Set a custom handler to serve files. This custom handler should return full HTTP header and body.
    /// This deactivates any previous handler set with `SetFileHandlerWindow`.
    /// </summary>
    /// <param name="handler">The handler function: `void myHandler(const char* filename, * int* length)`.</param>
    /// <remarks>
    /// <para>The callback function will always be executed in a background thread!</para>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_file_handler)</see></para>
    /// </remarks>>
    procedure   SetFileHandler(handler: TWebUIFileHandlerCallback);
    /// <summary>
    /// Set a custom handler to serve files. This custom handler should
    /// return full HTTP header and body.
    /// This deactivates any previous handler set with `SetFileHandler`.
    /// </summary>
    /// <param name="handler">The handler function: `void myHandler(size_t window, const char* filename, * int* length)`.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_file_handler_window)</see></para>
    /// </remarks>
    procedure   SetFileHandlerWindow(handler: TWebUIFileHandlerWindowCallback);
    /// <summary>
    /// Use this API to set a file handler response if your backend need async response for `SetFileHandler`.
    /// </summary>
    /// <param name="response">The response buffer.</param>
    /// <param name="length">The response size.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_interface_set_response_file_handler)</see></para>
    /// </remarks>
    procedure   SetResponseFileHandler(const response: Pointer; length: integer);
    /// <summary>
    /// Set the default embedded HTML favicon.
    /// </summary>
    /// <param name="icon">The icon as string: `<svg>...</svg>`.</param>
    /// <param name="icon_type">The icon type: `image/svg+xml`.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_icon)</see></para>
    /// </remarks>
    procedure   SetIcon(const icon, icon_type : string);
    /// <summary>
    /// Safely send raw data to the UI. All clients.
    /// </summary>
    /// <param name="function_">The JavaScript function to receive raw data: `function * myFunc(myData){}`.</param>
    /// <param name="raw">The raw data buffer.</param>
    /// <param name="size">The raw data size in bytes.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_send_raw)</see></para>
    /// </remarks>
    procedure   SendRaw(const function_: string; const raw: Pointer; size: NativeUInt);
    /// <summary>
    /// Set a window in hidden mode. Should be called before `webui_show()`.
    /// </summary>
    /// <param name="status">The status: True or False.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_hide)</see></para>
    /// </remarks>
    procedure   SetHide(status: boolean);
    /// <summary>
    /// Set the window size.
    /// </summary>
    /// <param name="width">The window width.</param>
    /// <param name="height">The window height.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_size)</see></para>
    /// </remarks>
    procedure   SetSize(width, height: cardinal);
    /// <summary>
    /// Set the window minimum size.
    /// </summary>
    /// <param name="width">The window width.</param>
    /// <param name="height">The window height.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_minimum_size)</see></para>
    /// </remarks>
    procedure   SetMinimumSize(width, height: cardinal);
    /// <summary>
    /// Set the window position.
    /// </summary>
    /// <param name="x">The window X.</param>
    /// <param name="y">The window Y.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_position)</see></para>
    /// </remarks>
    procedure   SetPosition(x, y: cardinal);
    /// <summary>
    /// Set the web browser profile to use. An empty `name` and `path` means the default user profile. Need to be called before `webui_show()`.
    /// </summary>
    /// <param name="name">The web browser profile name.</param>
    /// <param name="path">The web browser profile full path.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_profile)</see></para>
    /// </remarks>
    procedure   SetProfile(const name, path: string);
    /// <summary>
    /// Set the web browser proxy_server to use. Need to be called before 'webui_show()'.
    /// </summary>
    /// <param name="proxy_server">The web browser proxy_server. For example 'http://127.0.0.1:8888'</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_proxy)</see></para>
    /// </remarks>
    procedure   SetProxy(const proxy_server: string);
    /// <summary>
    /// Allow a specific window address to be accessible from a public network.
    /// </summary>
    /// <param name="status">True or False.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_public)</see></para>
    /// </remarks>
    procedure   SetPublic(status: boolean);
    /// <summary>
    /// Navigate to a specific URL. All clients.
    /// </summary>
    /// <param name="url">Full HTTP URL.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_navigate)</see></para>
    /// </remarks>
    procedure   Navigate(const Url: string);
    /// <summary>
    /// Delete a specific window web-browser local folder profile.
    /// </summary>
    /// <remarks>
    /// <para>This can break functionality of other windows if using the same web-browser.</para>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_delete_profile)</see></para>
    /// </remarks>
    procedure   DeleteProfile;
    /// <summary>
    /// Get the network port of a running window. This can be useful to determine the HTTP link of `webui.js`
    /// </summary>
    /// <returns>Returns the network port of the window.</returns>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_port)</see></para>
    /// </remarks>
    function    GetPort : NativeUInt;
    /// <summary>
    /// Set a custom web-server/websocket network port to be used by WebUI.
    /// This can be useful to determine the HTTP link of `webui.js` in case
    /// you are trying to use WebUI with an external web-server like NGNIX
    /// </summary>
    /// <param name="port">The web-server network port WebUI should use.</param>
    /// <returns>Returns True if the port is free and usable by WebUI.</returns>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_port)</see></para>
    /// </remarks>
    function    SetPort(port : NativeUInt): boolean;
    /// <summary>
    /// Set a custom web-server/websocket network port to be used by WebUI.
    /// This can be useful to determine the HTTP link of `webui.js` in case
    /// you are trying to use WebUI with an external web-server like NGNIX
    /// </summary>
    /// <param name="port">The web-server network port WebUI should use.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_port)</see></para>
    /// </remarks>
    procedure   SetPort2(port : NativeUInt);
    /// <summary>
    /// Run JavaScript without waiting for the response. All clients.
    /// </summary>
    /// <param name="script_">The JavaScript to be run.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_run)</see></para>
    /// </remarks>
    procedure   Run(const script_: string);
    /// <summary>
    /// Run JavaScript and get the response back. Work only in single client mode.
    /// Make sure your local buffer can hold the response.
    /// </summary>
    /// <param name="script_">The JavaScript to be run.</param>
    /// <param name="timeout">The execution timeout in seconds.</param>
    /// <param name="buffer">The local buffer to hold the response.</param>
    /// <param name="buffer_length">The local buffer size.</param>
    /// <returns>Returns True if there is no execution error.</returns>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_script)</see></para>
    /// </remarks>
    function    Script(const script_: string; timeout: NativeUInt; var buffer: string; buffer_length: NativeUInt): boolean;
    /// <summary>
    /// Chose between Deno and Nodejs as runtime for .js and .ts files.
    /// </summary>
    /// <param name="runtime">Deno, Bun, Nodejs or None.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_runtime)</see></para>
    /// </remarks>
    procedure   SetRuntime(runtime: TWebUIRuntime);
    /// <summary>
    /// Returns true if the bind id belongs to this window.
    /// </summary>
    /// <param name="aID">Bind ID that supposedly belongs to this window.</param>
    function    HasBindID(aID : TWebUIBindID): boolean;
    /// <summary>
    /// Control if UI events comming from this window should be processed
    /// one a time in a single blocking thread `True`, or process every event in
    /// a new non-blocking thread `False`. This update single window. You can use
    /// `webui_set_config(ui_event_blocking, ...)` to update all windows.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_event_blocking)</see></para>
    /// </remarks>
    procedure   SetEventBlocking(status: boolean);
    /// <summary>
    /// Start only the web server and return the URL. This is useful for web app.
    /// </summary>
    /// <param name="path">The local root folder full path.</param>
    /// <returns>Returns the url of this window server.</returns>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_start_server)</see></para>
    /// </remarks>
    function    StartServer(const path: string): string;
    /// <summary>
    /// Set the window with high-contrast support. Useful when you want to build a better high-contrast theme with CSS.
    /// </summary>
    /// <param name="status">True or False.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_high_contrast)</see></para>
    /// </remarks>
    procedure   SetHighContrast(status: boolean);
    /// <summary>
    /// Use this API after using `Bind` to add any user data to it that can be read later using `webui_get_context()`.
    /// </summary>
    /// <param name="element_">The HTML element / JavaScript object.</param>
    /// <param name="context">Any user data.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_context)</see></para>
    /// </remarks>
    procedure   SetContext(const element_ : string; context: Pointer);
    /// <summary>
    /// Add a user-defined web browser's CLI parameters.
    /// </summary>
    /// <param name="params">Command line parameters.</param>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_set_custom_parameters)</see></para>
    /// </remarks>
    procedure   SetCustomParameters(const params : string);
    /// <summary>
    /// Window number or Window ID.
    /// </summary>
    property ID                : TWebUIWindowID   read GetID;
    /// <summary>
    /// Returns true if the Window was created successfully.
    /// </summary>
    property Initialized       : boolean          read GetInitialized;
    /// <summary>
    /// Check if the specified window is still running.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_is_shown)</see></para>
    /// </remarks>
    property IsShown          : boolean           read GetIsShown;
    /// <summary>
    /// Get the full current URL.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_url)</see></para>
    /// </remarks>
    property Url              : string            read GetUrl;
    /// <summary>
    /// Get the ID of the parent process (The web browser may re-create another new process).
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_parent_process_id)</see></para>
    /// </remarks>
    property ParentProcessID  : NativeUInt        read GetParentProcessID;
    /// <summary>
    /// Get the ID of the last child process.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_child_process_id)</see></para>
    /// </remarks>
    property ChildProcessID   : NativeUInt        read GetChildProcessID;
    /// <summary>
    /// Get the recommended web browser ID to use. If you are already using one,
    /// this function will return the same ID.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_best_browser)</see></para>
    /// </remarks>
    property BestBrowser      : TWebUIBrowser     read GetBestBrowser;
    /// <summary>
    /// Allow using WebView to show a browser with TWebUIWindow.Show.
    /// </summary>
    property AllowWebView     : boolean           read GetAllowWebView     write SetAllowWebView;
    /// <summary>
    /// Get the network port of a running window. This can be useful to determine the HTTP link of `webui.js`
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_get_port)</see></para>
    /// </remarks>
    property Port             : NativeUInt        read GetPort             write SetPort2;
    {$IFDEF MSWINDOWS}
    /// <summary>
    /// Gets Win32 window `HWND`. More reliable with WebView than web browser window, as browser PIDs may change on launch.
    /// </summary>
    /// <remarks>
    /// <para><see href="https://github.com/webui-dev/webui/blob/main/include/webui.h">WebUI source file: /include/webui.h (webui_win32_get_hwnd)</see></para>
    /// </remarks>
    property Handle           : HWND              read GetHWND;
    {$ENDIF}
    /// <summary>
    /// Event triggered on a browser event. It's necessay to bind the event using the TWebUIWindow.Bind* functions without a "func_" parameter.
    /// </summary>
    property OnWebUIEvent     : TOnWebUIEvent     read GetOnWebUIEvent     write SetOnWebUIEvent;
  end;

implementation

end.
